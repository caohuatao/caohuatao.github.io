(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{433:function(e,t,n){"use strict";var l=n(1),o=n(41).find,i=n(143),a=n(21),r=!0,s=a("find");"find"in[]&&Array(1).find((function(){r=!1})),l({target:"Array",proto:!0,forced:r||!s},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i("find")},450:function(e,t,n){},485:function(e,t,n){var l=n(1),o=n(6);l({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperties:n(243)})},486:function(e,t,n){var l=n(1),o=n(2),i=n(17),a=n(33).f,r=n(6),s=o((function(){a(1)}));l({target:"Object",stat:!0,forced:!r||s,sham:!r},{getOwnPropertyDescriptor:function(e,t){return a(i(e),t)}})},487:function(e,t,n){"use strict";var l=n(450);n.n(l).a},490:function(e,t,n){"use strict";n.r(t);n(433),n(141),n(94),n(140),n(142),n(62),n(32),n(485),n(242),n(486),n(245);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);t&&(l=l.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,l)}return n}var i={node:0,link:1},a={data:function(){var e=this;return{drawerType:i,drawerConf:{title:"",visible:!1,type:null,info:null,open:function(t,n){var l=e.drawerConf;l.visible=!0,l.type=t,l.info=n,l.type===i.node?(l.title="节点",e.$refs.nodeSetting&&e.$refs.nodeSetting.resetFields(),e.$set(e.nodeSetting,"name",n.meta.name),e.$set(e.nodeSetting,"desc",n.meta.desc)):(l.title="连线",e.$refs.linkSetting&&e.$refs.linkSetting.resetFields(),e.$set(e.linkSetting,"desc",n.meta?n.meta.desc:""))},cancel:function(){e.drawerConf.visible=!1,e.drawerConf.type===i.node?e.$refs.nodeSetting.clearValidate():e.$refs.linkSetting.clearValidate()}},linkSetting:{desc:""},nodeSetting:{name:"",desc:""},dragConf:{isDown:!1,isMove:!1,offsetTop:0,offsetLeft:0,clientX:0,clientY:0,ele:null,info:null},nodeItemList:[{label:"节点1",value:function(){return{width:120,height:40,meta:{label:"1",name:"1"}}}},{label:"节点2",value:function(){return{width:120,height:40,meta:{label:"2",name:"2"}}}},{label:"节点3",value:function(){return{width:120,height:40,meta:{label:"3",name:"3"}}}},{label:"节点4",value:function(){return{width:120,height:40,meta:{label:"4",name:"4"}}}}],graphMenu:[[{label:"节点1",disable:function(e){return!!e.nodeList.find((function(e){return"1"===e.meta.label}))},selected:function(e,t){e.addNode({width:120,height:40,coordinate:t,meta:{label:"1",name:"1"}})}},{label:"节点2",selected:function(e,t){e.addNode({width:120,height:40,coordinate:t,meta:{label:"2",name:"2"}})}},{label:"节点3",selected:function(e,t){e.addNode({width:120,height:40,coordinate:t,meta:{label:"3",name:"3"}})}}],[{label:"节点4",selected:function(e,t){e.addNode({width:120,height:40,coordinate:t,meta:{label:"4",name:"4"}})}}],[{label:"全选",selected:function(e){e.selectAll()}}]],nodeMenu:[[{label:"删除",selected:function(e){e.remove()}},{label:"编辑",selected:function(t){e.drawerConf.open(i.node,t)}}]],linkMenu:[[{label:"删除",selected:function(e){e.remove()}},{label:"编辑",selected:function(t){e.drawerConf.open(i.link,t)}}]],linkBaseStyle:{color:"#666666",hover:"#FF0000",textColor:"#666666",textHover:"#FF0000",font:"14px Arial",dotted:!1,lineDash:[4,4],background:"rgba(255,255,255,0.6)"},fontList:["14px Arial","italic small-caps bold 12px arial"]}},mounted:function(){var e=this;document.addEventListener("mousemove",this.docMousemove),document.addEventListener("mouseup",this.docMouseup),this.$once("hook:beforeDestroy",(function(){document.removeEventListener("mousemove",e.docMousemove),document.removeEventListener("mouseup",e.docMouseup)}))},methods:{flowNodeClick:function(e){console.log(this.$refs.superFlow.graph)},linkStyle:function(e){return e.meta&&"1"===e.meta.desc?{color:"red",hover:"#FF00FF",dotted:!0}:{}},linkDesc:function(e){return e.meta?e.meta.desc:""},settingSubmit:function(){var e=this,t=this.drawerConf;this.drawerConf.type===i.node?(t.info.meta||(t.info.meta={}),Object.keys(this.nodeSetting).forEach((function(n){e.$set(t.info.meta,n,e.nodeSetting[n])})),this.$refs.nodeSetting.resetFields()):(t.info.meta||(t.info.meta={}),Object.keys(this.linkSetting).forEach((function(n){e.$set(t.info.meta,n,e.linkSetting[n])})),this.$refs.linkSetting.resetFields()),t.visible=!1},nodeMouseUp:function(e){e.preventDefault()},nodeClick:function(){console.log(arguments)},docMousemove:function(e){var t=e.clientX,n=e.clientY,l=this.dragConf;l.isMove?(l.ele.style.top=n-l.offsetTop+"px",l.ele.style.left=t-l.offsetLeft+"px"):l.isDown&&(l.isMove=Math.abs(t-l.clientX)>5||Math.abs(n-l.clientY)>5)},docMouseup:function(e){var t=e.clientX,n=e.clientY,i=this.dragConf;if(i.isDown=!1,i.isMove){var a=this.$refs.flowContainer.getBoundingClientRect(),r=a.top,s=a.right,c=a.bottom;if(t>a.left&&t<s&&n>r&&n<c){var d=this.$refs.superFlow.getMouseCoordinate(t-i.offsetLeft,n-i.offsetTop);this.$refs.superFlow.addNode(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({coordinate:d},i.info))}i.isMove=!1}i.ele&&(i.ele.remove(),i.ele=null)},nodeItemMouseDown:function(e,t){var n=e.clientX,l=e.clientY,o=e.currentTarget,i=e.currentTarget.getBoundingClientRect(),a=i.top,r=i.left,s=this.dragConf,c=o.cloneNode(!0);Object.assign(this.dragConf,{offsetLeft:n-r,offsetTop:l-a,clientX:n,clientY:l,info:t(),ele:c,isDown:!0}),c.style.position="fixed",c.style.margin="0",c.style.top=l-s.offsetTop+"px",c.style.left=n-s.offsetLeft+"px",this.$el.appendChild(this.dragConf.ele)}}},r=(n(487),n(59)),s=Object(r.a)(a,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",[n("el-form",{ref:"linkBaseStyle",staticClass:"link-base-style-form",attrs:{"label-width":"100px",model:e.linkBaseStyle},nativeOn:{submit:function(e){e.preventDefault()}}},[n("h4",[e._v("linkBaseStyle (连线的样式定制)")]),e._v(" "),n("el-row",{attrs:{gutter:10}},[n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"color"}},[n("el-color-picker",{model:{value:e.linkBaseStyle.color,callback:function(t){e.$set(e.linkBaseStyle,"color",t)},expression:"linkBaseStyle.color"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"hover"}},[n("el-color-picker",{model:{value:e.linkBaseStyle.hover,callback:function(t){e.$set(e.linkBaseStyle,"hover",t)},expression:"linkBaseStyle.hover"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"textColor"}},[n("el-color-picker",{model:{value:e.linkBaseStyle.textColor,callback:function(t){e.$set(e.linkBaseStyle,"textColor",t)},expression:"linkBaseStyle.textColor"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"textHover"}},[n("el-color-picker",{model:{value:e.linkBaseStyle.textHover,callback:function(t){e.$set(e.linkBaseStyle,"textHover",t)},expression:"linkBaseStyle.textHover"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"font"}},[n("el-select",{attrs:{size:"medium"},model:{value:e.linkBaseStyle.font,callback:function(t){e.$set(e.linkBaseStyle,"font",t)},expression:"linkBaseStyle.font"}},e._l(e.fontList,(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"dotted"}},[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.linkBaseStyle.dotted,callback:function(t){e.$set(e.linkBaseStyle,"dotted",t)},expression:"linkBaseStyle.dotted"}})],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"lineDash"}},[n("el-select",{staticStyle:{width:"80px"},attrs:{size:"medium"},model:{value:e.linkBaseStyle.lineDash[0],callback:function(t){e.$set(e.linkBaseStyle.lineDash,0,t)},expression:"linkBaseStyle.lineDash[0]"}},e._l([1,2,3,4,5,6,7,8],(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1),e._v(" "),n("el-select",{staticStyle:{width:"80px"},attrs:{size:"medium"},model:{value:e.linkBaseStyle.lineDash[1],callback:function(t){e.$set(e.linkBaseStyle.lineDash,1,t)},expression:"linkBaseStyle.lineDash[1]"}},e._l([1,2,3,4,5,6,7,8],(function(e){return n("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),e._v(" "),n("el-col",{attrs:{span:12}},[n("el-form-item",{attrs:{label:"background"}},[n("el-color-picker",{model:{value:e.linkBaseStyle.background,callback:function(t){e.$set(e.linkBaseStyle,"background",t)},expression:"linkBaseStyle.background"}})],1)],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"super-flow-demo1"},[n("div",{staticClass:"node-container"},e._l(e.nodeItemList,(function(t){return n("span",{staticClass:"node-item",on:{mousedown:function(n){return e.nodeItemMouseDown(n,t.value)}}},[e._v("\n        "+e._s(t.label)+"\n      ")])})),0),e._v(" "),n("div",{ref:"flowContainer",staticClass:"flow-container"},[n("super-flow",{ref:"superFlow",attrs:{"graph-menu":e.graphMenu,"node-menu":e.nodeMenu,"link-menu":e.linkMenu,"link-base-style":e.linkBaseStyle,"link-style":e.linkStyle,"link-desc":e.linkDesc},scopedSlots:e._u([{key:"node",fn:function(t){var l=t.meta;return[n("div",{staticClass:"flow-node ellipsis",on:{mouseup:e.nodeMouseUp,click:e.nodeClick}},[e._v("\n            "+e._s(l.name)+"\n          ")])]}}])})],1)]),e._v(" "),n("el-dialog",{attrs:{title:e.drawerConf.title,visible:e.drawerConf.visible,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){return e.$set(e.drawerConf,"visible",t)}}},[n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.node,expression:"drawerConf.type === drawerType.node"}],ref:"nodeSetting",attrs:{model:e.nodeSetting},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.settingSubmit(t)},submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"节点名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入节点名称",maxlength:"30"},model:{value:e.nodeSetting.name,callback:function(t){e.$set(e.nodeSetting,"name",t)},expression:"nodeSetting.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"节点描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"请输入节点描述",maxlength:"30"},model:{value:e.nodeSetting.desc,callback:function(t){e.$set(e.nodeSetting,"desc",t)},expression:"nodeSetting.desc"}})],1)],1),e._v(" "),n("el-form",{directives:[{name:"show",rawName:"v-show",value:e.drawerConf.type===e.drawerType.link,expression:"drawerConf.type === drawerType.link"}],ref:"linkSetting",attrs:{model:e.linkSetting},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.settingSubmit(t)},submit:function(e){e.preventDefault()}}},[n("el-form-item",{attrs:{label:"连线描述",prop:"desc"}},[n("el-input",{attrs:{placeholder:"请输入连线描述"},model:{value:e.linkSetting.desc,callback:function(t){e.$set(e.linkSetting,"desc",t)},expression:"linkSetting.desc"}})],1)],1),e._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.drawerConf.cancel}},[e._v("\n        取 消\n      ")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:e.settingSubmit}},[e._v("\n        确 定\n      ")])],1)],1)],1)}),[],!1,null,null,null);t.default=s.exports}}]);